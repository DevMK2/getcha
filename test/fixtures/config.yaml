apis:
  - id: test-api
    host: api.example.com
    url: /users
    method: GET
    parameters:
      limit: 10
    headers:
      Authorization: Bearer test-token
    mapping:
      - source: data[*].id
        target: user_id
      - source: data[*].name
        target: user_name

  - id: second-api
    host: api.example.com
    url: /users/{{test-api.data[*].id}}/details
    method: POST
    parameters:
      role: "{{test-api.data[*].role}}"
      department: "{{test-api.data[*].department}}"
    headers:
      Authorization: Bearer test-token
      Content-Type: application/json
    body:
      userName: "{{test-api.data[*].name}}"
      userRole: "{{test-api.data[*].role}}"
      metadata:
        department: "{{test-api.data[*].department}}"
    mapping:
      - source: id
        target: detail_user_id
      - source: email
        target: email
      - source: profile.address
        target: address
      - source: profile.team
        target: team
    previousApiId: test-api 